version: "3.9"
services:
  shell:
    build:
      context: ci
      dockerfile: Dockerfile.parcoach
      # NOTE: values for these args are automatically generated by the
      # build-image script in the CI;
      # FIXME: we should add an option to build-image for just printing
      # this part of the docker compose file.
      args:
        - UBUNTU_VERSION=focal
        - CMAKE_VERSION=3.23.2
        - CMAKE_SHA256=aaced6f745b86ce853661a595bdac6c5314a60f8181b6912a0a4920acfa32708
        - LLVM_VERSION=15
      tags:
        - "parcoach:ubuntu-focal-build-20221125-llvm-15"
    # NOTE: I don't think this is possible, but ideally we would share this
    # variable with the .gitlab-ci.yml
    image: "parcoach:ubuntu-focal-build-20221125-llvm-15"
    volumes:
      - .:/home/parcoach/sources
